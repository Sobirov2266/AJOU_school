{% extends "admin_panel/base.html" %}
{% load static %}

{% block title %}Class Students{% endblock %}

{% block content %}
<main class="classes-page">

  <header class="header">
    <div class="header-left">
      <h2>{{ school_class.name }} — O‘quvchilar</h2>
      <p>Ushbu sinfga biriktirilgan o‘quvchilar ro‘yxati</p>
    </div>
  </header>

  <section class="card classes-card" style="margin-top:16px;">
    <div class="card-header classes-card-header">
      <div>
        <h3>Export</h3>
        <span class="muted">Faqat: First name, Last name, Login, Password</span>
      </div>

      <div class="right" style="display:flex; gap:10px;">
        <a class="btn btn-primary" href="{% url 'admin_panel:class_students_export_excel' school_class.id %}">
          Export to Excel
        </a>
        <a class="btn btn-secondary" href="{% url 'admin_panel:class_students_export_pdf' school_class.id %}">
          Export to PDF
        </a>
      </div>
    </div>

    <div class="card-body table-responsive">
      <table class="classes-table">
        <thead>
          <tr>
            <th style="width:60px;">#</th>
            <th>First name</th>
            <th>Last name</th>
            <th>Login</th>
            <th>Password</th>
          </tr>
        </thead>
        <tbody>
          {% for e in enrollments %}
          <tr>
            <td class="muted">{{ forloop.counter }}</td>
            <td>{{ e.student.first_name }}</td>
            <td>{{ e.student.last_name }}</td>
            <td>{{ e.student.user.username }}</td>
            <td>{{ e.student.passport_id }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="empty">
              <div class="empty-state">
                <h4>Bu sinfda o‘quvchilar yo‘q</h4>
                <p class="muted">Avval o‘quvchini sinfga biriktiring.</p>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

</main>
{% endblock %}
