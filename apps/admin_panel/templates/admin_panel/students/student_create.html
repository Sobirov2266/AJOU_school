{% extends "admin_panel/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/admin_student_create.css' %}">
{% endblock %}

{% block content %}
<div class="page-wrapper">

    <div class="form-card">

        <!-- HEADER -->
        <div class="form-header">
            <div class="header-left">
                <div class="header-icon">
                    <i class="fa-solid fa-user-graduate"></i>
                </div>
                <div>
                    <h1>Yangi o‘quvchi qo‘shish</h1>
                    <p>Xalqaro maktab uchun o‘quvchi profilini yarating</p>
                </div>
            </div>
        </div>

        <form method="post" enctype="multipart/form-data" class="student-form">
            {% csrf_token %}

            <!-- ACCOUNT -->
            <div class="form-section">
                <h3>Account ma’lumotlari</h3>

                <div class="grid">
                    <div class="field">
                        <label>Login</label>
                        <input type="text" value="Avtomatik yaratiladi" disabled>
                    </div>

                    <div class="field">
                        <label>Birinchi parol</label>
                        <input type="text" value="Passport/ID bo‘yicha" disabled>
                    </div>
                </div>


            </div>

            <!-- PERSONAL -->
            <div class="form-section">
                <h3>Shaxsiy ma’lumotlar</h3>

                <div class="grid">
                    <div class="field">
                        <label>Ismi</label>
                        <input
                            type="text"
                            name="first_name"
                            placeholder="O‘quvchi ismi"
                            required
                            pattern="[A-Za-zÀ-ÖØ-öø-ÿʻʼ’`\s-]+"
                            title="Faqat harflar"
                            value="{% if form %}{{ form.data.first_name }}{% endif %}"
                        >
                    </div>

                    <div class="field">
                        <label>Familiyasi</label>
                        <input type="text" name="last_name" placeholder="O‘quvchi familiyasi" required value="{% if form %}{{ form.data.last_name }}{% endif %}">
                    </div>

                    <div class="field">
                        <label>Tug‘ilgan sana</label>
                        <input type="date" name="birth_date" value="{% if form %}{{ form.data.birth_date }}{% endif %}">
                    </div>

                    <div class="field">
                        <label>Passport / ID</label>
                        <input
                            type="text"
                            name="passport_id"
                            placeholder="AB1234567"
                            maxlength="9"
                            pattern="[A-Z]{2}[0-9]{7}"
                            autocomplete="off"
                            required
                            value="{% if form %}{{ form.data.passport_id }}{% endif %}"
                        >
                    </div>
                </div>
            </div>

            <!-- SCHOOL -->
            <div class="form-section">
                <h3>Maktab ma’lumotlari</h3>

                <div class="grid">
                    <div class="field">
                        <label>Ota-ona telefoni</label>
                        <input
                            type="text"
                            name="parent_phone"
                            placeholder="+998901234567"
                            required
                            maxlength="13"
                            pattern="\+[0-9]{12}"
                            inputmode="numeric"
                            autocomplete="off"
                            value="{% if form %}{{ form.data.parent_phone }}{% endif %}"
                        >
                    </div>

                    <div class="field">
                        <label>Sinf</label>
                        <select name="school_class" required>
                            <option value="">— Sinfni tanlang —</option>
                            {% for c in classes %}
                                <option value="{{ c.id }}" {% if form and form.data.school_class == c.id|stringformat:"s" %}selected{% endif %}>{{ c.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <!-- AVATAR -->
            <div class="form-section">
                <h3>Profil rasmi</h3>

                <div class="upload-area" onclick="document.getElementById('avatar').click()">
                    <i class="fa-solid fa-cloud-arrow-up"></i>
                    <p>Rasm yuklash</p>
                    <span id="fileName">PNG, JPG (max 5MB)</span>
                </div>
                <input type="file" name="avatar" id="avatar" hidden onchange="showFileName(this)">
            </div>

            <!-- ACTIONS -->
            <div class="form-actions">
                <button type="submit" class="btn primary">
                    Saqlash
                </button>
                <a href="{% url 'admin_panel:admin_students' %}" class="btn secondary">
                    Bekor qilish
                </a>
            </div>

        </form>
    </div>

</div>

<script src="{% static 'js/admin_students_create.js' %}"></script>
{% endblock %}
